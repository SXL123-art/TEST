
创建时间：2018年7月27日
    作者：周松松
工程维护：周松松
	
注：如果修改了工程需要更新readme说明

软件工程：CT100_2_700工程目录---在CT200 7寸工程上修改而来
		去掉CT200stm32通讯代码，
		添加AD，和按键处理模块，
		添加与ATM8单片机通讯
		后续扩展可根据地方和项目命名（如：济南浪潮项目，命名为CT100_2_700_JN）

适用范围：
		1、CT100电子秤7寸屏700格式主销售界面
		2、用于超市零售
		3、市场追溯
		4、收银系统

可附加功能：
		1、收银箱
		2、会员卡，追溯卡，微信，支付宝，银行，POS机等其他支付方式
		3、摄像头图片采集（不支持）
		4、对接图像识别服务器（不支持）
		5、对接追溯系统
		6、对接收银系统
		7、上位机系统
		
软件功能：
		请见CT100软件功能说明文档

版本修改：Public\typeTabUi.h文件SOFTWAREVER宏

屏幕定义：Public\typeTabUi.h文件DISPLY_700宏（只支持7寸屏）

键盘大小：该工程目前支持KEY30 KEY60键盘，Public\typeTabUi.h文件KEY_TYPE宏

编译环境：QT Creator,打开QT Creator后请检查--项目--配置环境->选择arm编译器及其编译生成文件目录

目录结构说明：
	Public----全局头文件，三个应用程序均引用
	
	CT100update--程序压缩包准备
	
	backups--项目需要的文件（linux下）
	
	run.bat---windows批处理文件，完成对CT100update目录内容生成，压缩，具体详见：文本工具打开run.bat
	
	CT100Man---qtSocketServer--socket服务器，端口3230，用于软件升级
		|
		|------runApp--创建共享内存，开进程运行应用程序和显示程序
		|
		|------usbUpdate--开机自动扫描U盘，检测升级程序
		|
		|------main.c程序开始

	CT100App---ATAdc--读取AD驱动，完成对传感器AD数据的处理，标定数据处理，换算成需要的标准重量
		|
		|------ATBeep--加载蜂鸣器驱动，封装接口完成蜂鸣器控制
		|
		|------ATI2CDevice--控制I2C，完成对时钟芯片读写时间
		|
		|------ATKeyboard--按键处理模块，读取按键驱动
		|
		|------ATLib--字符转码，MD5加密，小功能函数
		|
		|------ATPeripherals--扫描枪和摄像头（暂保留摄像头代码，但不支持摄像头）
		|
		|------ATPrint--CT100并口打印机
		|
		|------ATPmu--收银箱接口
		|
		|------ATPwm--显示屏背光控制
		|
		|------ATQr--二维码生成
		|
		|------ATScaleHttpServer--Http服务器采用libevent开源库实现上位机客户端访问
		|
		|------ATSerialDevice--串口设备，如读卡器，zigbee,蓝牙，串口扫描枪，pos机等
		|
		|------ATShm--共享内存，发送数据到QT，发送数据到扩展屏
		|
		|------ATSocket--xml，json 数据处理库，curl网络库，QtHttp
		|
		|------ATSqlite--数据库处理及接口实现
		|
		|------ATAtmel8--完成与Atmel8串口数据交互，ARM使用串口0
		|
		|------ATWebserver--完成第三方web服务器对接
		|
		|------unit--程序全局类，初始化各模块，界面切换
		|
		|------public---依赖的头文件
		|
		|------main.c--程序开始
		|
		|-----ATSatus---calibration--标定数据界面逻辑
				|
				|-------goodskey--商品按键绑定界面逻辑
				|
				|-------login--登录界面逻辑
				|
				|-------menu--菜单界面逻辑
				|
				|-------msgdialog--提示输入框界面逻辑
				|
				|-------pay--支付界面逻辑
				|
				|-------report--报表界面逻辑
				|
				|-------sale--销售界面，销售逻辑处理
				
	CT100Qt----calibration--标定界面
		|
		|------goodskey--商品按键绑定界面
		|
		|------inputbox--输入框界面
		|
		|------login--登录界面
		|
		|------menu--菜单界面
		|
		|------msgbox--提示框界面
		|
		|------pay--支付界面
		|
		|------report--报表界面
		|
		|------sale--销售界面
		|
		|------screensaver--屏保界面
		|
		|------main.cpp--程序开始
		|
		|------showdialog--主界面
		|
		|------image--界面图片图标
		
修改记录：（格式：时间|修改文件|修改描述）
		1、2018-07-27|readme.txt|创建文件，用于描述工程
				
		
		济南浪潮版本JN1.0
		
		去济南出差，解决软件问题JN1.0---JN1.2
		1、现场对接web平台，调试，解决多批次插入死机，解决办法：数据库操作加互斥锁
		2  网络监测，以前ping网关，现在ping外网地址，如果外网地址配置不对，显示未联网状态
		3、新增多批次选择显示
		4、保留上次商品同时也要保留上次批次信息
		5、改变查找商品的方式，快捷键两页查找。
		6、修改上位机通讯模块
		7.上位机软件修改及优化
		8.链接以前数据库9998进行参数恢复和标定信息恢复
		9、解决累计显示舍分的情况下，显示多个9分的问题
		
		JN1.2-----JN1.6
		1、删除9998 链接以前数据库代码
		2、新增打印二维码
		3、JN1.5版本为工厂版本，会存在许多历史遗留bug
		
		JN1.6----JN1.7
		1、解决保留上一次单价，舍分的问题，乘以100.0f
		2、重复打印上一笔交易，修改小票与第一次小票格式一样
		3、解决累计有分的问题，乘以100.0f
		
		JN1.7----JN1.8
		1、解决保留上一次单价，舍分的问题，乘以100.0f，还是有问题，单价2.12 保存为2.11，精度问题，采用双精度double+0.01
		2、解决批次码等于10笔不打印问题
		
		JN1.8----JN1.9
		1、解决显示卡屏现象，主要是共享内存出错
		2、解决数据库整理命令导致的数据库磁盘已满的情况，导致的开不了机
		
		JN1.9----JN2.0
		1、解决超重界面取消框不能取消
		
		JN2.0----JN2.1
		1、追溯码没有选择最新的
		
		JN2.1------JN2.2
		代码发给了谢杰，但谢杰没有发布过版本，所以跳过一个版本
				|
				|
		JN2.1------JN2.3
		修改了二维码地址，修改为：http://rczs.jinanbusiness.gov.cn/ctm/inf/trace.cmd?method=fortraceinfo&tranId=%s
		修改了上位机通讯，对接济南浪潮V1.2版本上位机软件
		
		JN2.3-----JN2.4
		修改二维码地址，修改为：http://rczs.jnbusiness.jinan.gov.cn/ctm/inf/trace.cmd?method=fortraceinfo&tranId=%s
		
		JN2.4-----JN2.5
		解决上位机在没有web平台的情况下第二天回收不到数据的问题
		
		JN5.0
		在原先的基础上分离出来一个版本，重新对接新的WEB平台，其他交易流程不变
		
		
		
		
		


